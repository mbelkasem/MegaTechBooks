{% extends 'base.html.twig' %}

{% block title %}Chat{% endblock %}

{% block body %}

<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="{{ path('app_main') }}"><strong>Mega TechBooks</strong></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        {% if app.user %}
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link text-light" href="{{path ('app_post_index')}}"><i class="bi bi-journal"></i> Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-light" href="{{ path('app_user') }}"><i class="bi bi-person-circle"></i> Mon Profile</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-light" href="{{ path('app_logout') }}"><i class="bi bi-box-arrow-right"></i> Me DÃ©connecter</a>
            </li>
          </ul>
        {% else %}
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link text-light" href="{{path ('app_post_index')}}"><i class="bi bi-journal"></i> Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-light" href="{{ path ('app_login') }}"><i class="bi bi-box-arrow-in-right"></i> Se Connecter</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-light" href="{{ path ('app_register') }}"><i class="bi bi-person-plus-fill"></i> S'inscrire</a>
            </li>
          </ul>
        {% endif %}
        
       
      </div>
    </nav>
   
  </header>
    <h1 class="container">Espace utilisateurs</h1>

    <div class="container card">
        <div class="card-body" id="chat-messages">
            {% for message in messages %}
                <div class="card mb-2">
                    <div class="card-body">
                        <strong>{{ message.user.login }}</strong>: {{ message.message }}

    <div class="container chat-window col-12 col-md-6 mt-3">
        <div class="panel panel-default">
            <div class="panel-heading top-bar">
                <div class="col-md-8">
                    <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Espace utilisateurs</h3>
                </div>
                <div class="col-md-4 text-right">
                    <button class="btn btn-default btn-sm" id="minim_chat_window"><span class="glyphicon glyphicon-minus"></span></button>
                    <button class="btn btn-default btn-sm" id="close_chat_window"><span class="glyphicon glyphicon-remove"></span></button>
                </div>
            </div>
            <div class="panel-body msg-container-base">
                <div class="container card">
                    <div class="card-body" id="chat-messages">
                        {% for message in messages %}
                            <div class="card mb-2">
                                <div class="card-body">
                                    <strong>{{ message.user.login }}</strong>: {{ message.message }}
                                </div>
                            </div>
                        {% endfor %}

                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container mt-3">
        <div class="card">
            <div class="card-body">
                <form method="post" action="{{ path('chat_send') }}">
                    <div class="input-group">
                        <input type="text" name="message" class="form-control" required>
                        <span class="input-group-btn">
                            <button class="btn btn-primary btn-block" type="submit">Send</button>
                        </span>
                    </div>
                </form>
            </div>
        </div>

    </form>
    <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="container">
          <div class="row">
            <div class="col-12 col-md">
              <img class="mb-2" src="{{ asset('images/logo/mtblogo2.png')}}" alt="" width="50" height="50">
              <small class="d-block mb-3 text-body-secondary">&copy; 2023</small>
            </div>
            <div class="col-6 col-md">
              <h5>Products</h5>
              <ul class="list-unstyled text-small">
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('product_books') }}">Books </a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('product_computers') }}">Computers</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('product_hiffis') }}">Hiffis</a></li>
              </ul>
            </div>
            <div class="col-6 col-md">
              <h5>Services</h5>
              <ul class="list-unstyled text-small">
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_register') }}">Registration</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_login') }}">Login</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_user') }}">mon Profil</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_panier') }}">Panier</a></li>
              </ul>
            </div>
            <div class="col-6 col-md">
              <h5>About</h5>
              <ul class="list-unstyled text-small">
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_main') }}">Accueil</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('chat') }}">Mini-Chat</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_post_index') }}">Blog</a></li>
                <li class="mb-1"><a class="link-secondary text-decoration-none" href="{{ path('app_contact') }}">contact</a></li>
              </ul>
            </div>
          </div>
      </div>
    </footer>
    

    </div>

    <style>
        .msg-container-base {
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 10px;
        }
        
        .card-body {
            padding: 10px;
        }
        
        .btn-block {
            width: 100%;
        }
    </style>

{% endblock %}
